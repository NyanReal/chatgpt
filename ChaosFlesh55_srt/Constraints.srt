1
00:00:02,270 --> 00:00:06,990
지난 영상에서는 근육의 기시와 정지(부착점)를 페인트하고 전달(Transfer)했습니다.

2
00:00:07,290 --> 00:00:12,930
또한 근수축과 관련된 근섬유 필드와 기타 데이터를 계산했습니다.

3
00:00:13,790 --> 00:00:19,150
이제 시뮬레이션 동안 테트라 메시에 영향을 줄 제약(Constraints)을 정의해 봅시다.

4
00:00:19,990 --> 00:00:29,830
우리의 근육 시뮬레이션은 ‘inside‑out’ 접근을 사용합니다. 즉, 애니메이션된 뼈가 근육을 구동하고, 이어서 지방층도 구동합니다.

5
00:00:30,590 --> 00:00:32,210
이제 뼈를 가져오겠습니다.

6
00:00:35,050 --> 00:00:37,510
새로운 Skeletal Mesh 노드를 만듭니다.

7
00:00:40,960 --> 00:00:42,860
그 노드를 뼈(Skeleton)로 설정합시다.

8
00:00:48,440 --> 00:00:51,960
시각화할 수 있도록 이를 컬렉션으로 변환해 줍니다.

9
00:00:56,720 --> 00:00:59,940
이제 캐릭터의 뼈가 보입니다.

10
00:01:04,020 --> 00:01:08,160
근육과 뼈를 모두 볼 수 있도록 두 노드를 모두 선택합시다.

11
00:01:16,310 --> 00:01:23,530
먼저 근육 부착점을 뼈에 고정하는 키네마틱 제약을 만들겠습니다.

12
00:01:24,310 --> 00:01:33,470
키네마틱 제약이란, 키네마틱 버텍스의 위치가 시뮬레이션 동안 선형 스키닝(linear skinning)된다는 의미입니다.

13
00:01:34,850 --> 00:01:44,190
시뮬레이션의 움직임은 주로 각 프레임의 조인트 변환을 따르는 키네마틱 제약에 의해 구동됩니다.

14
00:01:45,790 --> 00:01:52,570
이제 ‘Kinematic Muscle Attachments’라는 새 노드를 만들겠습니다.

15
00:01:56,540 --> 00:02:03,280
이 노드는 방금 페인트한 근육의 기시/정지를 키네마틱으로 바인딩합니다.

16
00:02:04,800 --> 00:02:09,220
그리고 그것들을 뼈에 해당하는 Skeletal Mesh에 키네마틱으로 바인딩합니다.

17
00:02:10,960 --> 00:02:15,460
따라서 컬렉션과 기시/정지 인덱스를 연결해 주세요.

18
00:02:20,960 --> 00:02:23,660
또 여기에는 뼈의 Skeletal Mesh도 지정합니다.

19
00:02:26,480 --> 00:02:34,840
이제 ‘Visualize Kinematic Faces’ 노드를 통해 키네마틱 부착을 시각화할 수 있습니다.

20
00:02:39,800 --> 00:02:47,420
해당 노드를 선택하면, 이 노드에서 생성된 키네마틱 페이스들을 볼 수 있습니다.

21
00:02:49,120 --> 00:02:56,260
이 노드는 내부 버텍스는 보지 못하며, 거친 추정 용도로만 사용할 수 있다는 점을 참고하세요.

22
00:02:58,440 --> 00:03:03,700
다음으로, 뼈에 가까운 일부 근육 버텍스를 키네마틱하게 제약해 봅시다.

23
00:03:06,180 --> 00:03:15,820
사용할 노드는 ‘Set Flesh Bone Position Target Binding’입니다.

24
00:03:18,930 --> 00:03:22,570
여기에서 Skeletal Binding Mode는 ‘Kinematic’을 선택합니다.

25
00:03:22,990 --> 00:03:26,650
우리는 근육과 뼈 사이의 키네마틱 제약을 만들고 있기 때문입니다.

26
00:03:27,750 --> 00:03:36,350
Vertex Radius Ratio는 근육과 뼈 사이의 검색 반경을 제어합니다.

27
00:03:36,570 --> 00:03:41,950
그렇게 해서 뼈에 가까운 근육 버텍스들이 제약을 받게 됩니다.

28
00:03:44,350 --> 00:03:53,330
여기서 0.001은 컬렉션 바운딩 박스의 가장 긴 변 길이의 0.1%라는 뜻입니다.

29
00:03:53,810 --> 00:04:02,270
이 근육 지오메트리의 바운딩 박스를 왼손에서 오른손까지의 거리라고 생각해 보세요.

30
00:04:02,490 --> 00:04:05,150
즉, 그 거리의 0.1%입니다.

31
00:04:05,390 --> 00:04:08,910
이 값은 해당 제약을 만들 때의 검색 반경으로 사용됩니다.

32
00:04:13,190 --> 00:04:16,090
대안으로 ‘Position Target’ 모드도 있습니다.

33
00:04:17,170 --> 00:04:20,730
‘Position Target’(때로는 ‘약한 제약(Weak Constraint)’이라고도 부름)은

34
00:04:21,050 --> 00:04:25,470
본질적으로 두 버텍스 집합을 연결하는 스프링입니다.

35
00:04:26,030 --> 00:04:28,250
예를 들어 버텍스‑버텍스, 또는

36
00:04:28,470 --> 00:04:32,110
삼각형 내부의 바리센트릭 점과 버텍스를 연결할 수 있습니다.

37
00:04:32,970 --> 00:04:38,410
현재 위치와 목표 위치 사이의 거리는 솔버가 진행되는 동안 페널티로 처리됩니다.

38
00:04:39,090 --> 00:04:42,630
약한 제약과 키네마틱 제약의 주요 차이는

39
00:04:43,430 --> 00:04:48,230
약한 제약은 목표 위치에서 약간 벗어나는 것이 허용된다는 점입니다.

40
00:04:49,470 --> 00:04:54,970
그리고 스프링의 강도(세기)는 여기 있는 Stiffness 파라미터 등으로 설정할 수 있습니다.

41
00:04:56,450 --> 00:04:59,230
이제 여기 Skeletal Mesh를 설정해 봅시다.

42
00:05:00,390 --> 00:05:04,310
뼈용 Skeletal Mesh를 동일하게 지정합니다.

43
00:05:05,910 --> 00:05:11,490
이 예제에서는 Vertex Radius Ratio를 0.005로 설정하겠습니다.

44
00:05:15,560 --> 00:05:18,660
이제 ‘Visualize Kinematic Faces’를 여기로 가져와 보겠습니다.

45
00:05:20,680 --> 00:05:24,560
그러면 더 많은 키네마틱 페이스가 보일 것입니다.

46
00:05:26,180 --> 00:05:29,600
이는 근육에서 온 버텍스 또는 페이스들입니다.

47
00:05:30,120 --> 00:05:32,560
이것들은 뼈에 키네마틱하게 제약되어 있습니다.

48
00:05:35,640 --> 00:05:41,760
다음으로, 시뮬레이션 중에 근육이 흐물거리지 않도록 몇 가지 약한(weak) 제약도 필요합니다.

49
00:05:43,060 --> 00:05:53,350
이제 ‘Set Vertex‑Triangle Position Target Binding’을 만들겠습니다.

50
00:05:57,100 --> 00:06:03,180
이 노드는 연결된 지오메트리들 사이에 점‑삼각형 스프링을 만듭니다.

51
00:06:03,500 --> 00:06:05,860
이 경우에는 근육들 사이입니다.

52
00:06:07,060 --> 00:06:14,940
Vertex Radius Ratio를 0.004로 설정합시다.

53
00:06:15,320 --> 00:06:17,260
그리고 Stiffness는 10으로 설정합니다.

54
00:06:20,060 --> 00:06:24,440
Vertex Radius Ratio는 이전 노드와 동일한 방식으로 동작합니다.

55
00:06:28,810 --> 00:06:35,930
이제 ‘Visualize Position Target’ 노드를 통해 약한 제약을 시각화할 수 있습니다.

56
00:06:38,390 --> 00:06:43,310
우측 상단 버튼을 켜서 렌더링하도록 하세요.

57
00:06:44,010 --> 00:06:47,910
이제 빨간색으로 칠해진 작은 선분들이 보일 겁니다.

58
00:06:48,830 --> 00:06:50,870
이것이 약한 제약을 나타냅니다.

59
00:06:53,150 --> 00:06:55,470
즉, 근육과 근육 사이에 걸려 있습니다.

60
00:07:02,730 --> 00:07:05,350
다음 단계는 선택 사항입니다.

61
00:07:06,950 --> 00:07:11,010
이 시점에서 키네마틱 버텍스의 스킨 웨이트를 확인할 수 있습니다.

62
00:07:12,210 --> 00:07:14,230
‘Vertices’ 그룹으로 가봅시다.

63
00:07:17,380 --> 00:07:21,160
하단 쪽에 ‘Bone Weight Index’와 ‘Bone Weights’가 보입니다.

64
00:07:22,980 --> 00:07:29,520
이는 키네마틱 버텍스를 스키닝하는 데 사용할 선형 블렌드 스키닝 가중치입니다.

65
00:07:31,140 --> 00:07:33,300
대부분이 Rigid(경직)인 것을 볼 수 있습니다.

66
00:07:34,500 --> 00:07:39,600
가중치가 1인 뼈 하나에만 연관되어 있기 때문이죠.

67
00:07:40,800 --> 00:07:46,240
더 나은 스키닝이 적용된 Skeletal Mesh가 있다면,

68
00:07:46,480 --> 00:07:52,600
지금 그 Skeletal Mesh에서 테트라 메쉬로 스킨 웨이트를 전송(transfer)할 수 있습니다.

69
00:07:53,620 --> 00:08:00,200
‘Transfer Skin Weights’—‘Vertex Skin Weights’ 노드를 생성합시다.

70
00:08:03,300 --> 00:08:08,360
‘From Collection’에는 Skeletal Mesh 컬렉션을 지정합니다.

71
00:08:13,010 --> 00:08:15,710
여기 근육 Skeletal Mesh 컬렉션이 있습니다.

72
00:08:15,930 --> 00:08:17,810
그래서 그것을 여기까지 연결해 줍니다.

73
00:08:23,130 --> 00:08:30,590
참고로, 이것은 여기의 ‘Transfer Vertex Attribute’와 거의 같은 방식으로 동작합니다.

74
00:08:30,910 --> 00:08:32,490
그래서 이 부분의 자세한 설명은 생략하겠습니다.

75
00:08:32,770 --> 00:08:41,070
다만, 이것 역시 ‘From/To Collection’ 간 지오메트리 수가 같아야만 한다는 제약이 있습니다.

76
00:08:43,530 --> 00:08:45,970
이 문제는 5.6에서 수정할 예정입니다.

77
00:08:49,340 --> 00:08:55,600
이제 ‘Vertices’로 가보면, 뼈 가중치가 바뀐 것을 볼 수 있습니다.

78
00:08:56,060 --> 00:09:00,740
이전의 Rigid 스키닝 대신 블렌드에 더 가까워졌죠.

79
00:09:02,880 --> 00:09:10,000
다시 말하지만, 이 단계는 선택 사항이며 근육용 Skeletal Mesh의 스킨 웨이트를 사용하려는 경우에 유용합니다.

80
00:09:12,380 --> 00:09:14,940
마지막으로 ‘Flesh Asset Terminal’을 생성합시다.

81
00:09:16,740 --> 00:09:17,980
이 노드는 전에 본 적이 있습니다.

82
00:09:18,180 --> 00:09:22,560
이제 컬렉션을 Flesh Asset에 저장할 수 있습니다.

83
00:09:25,910 --> 00:09:32,890
이제 시뮬레이션 뷰포트에서 우리의 Flesh Asset을 볼 수 있을 겁니다.

84
00:09:35,270 --> 00:09:39,930
정리하면, 이제 근육과 뼈 사이의 키네마틱 제약을 정의했고,

85
00:09:40,310 --> 00:09:42,790
근육끼리의 약한 제약도 정의했습니다.

86
00:09:43,670 --> 00:09:46,610
다음 영상에서는 근육 시뮬레이션을 시작하겠습니다.

87
00:09:46,610 --> 00:09:46,650
하지만 일부 마르셀리노이드도 그의 브록클리 목을 보기 위해 있었다.

88
00:09:46,650 --> 00:09:46,750
그는 힐러라고 불립니다.

89
00:09:46,810 --> 00:09:46,890
좋은 메모리에 대한 자신감이 있었습니다.

90
00:09:46,890 --> 00:09:47,410
그리고 이것이 두 번째 것입니다.
