1
00:00:03,080 --> 00:00:06,540
지난 영상에서는 충돌과 근수축이 포함된 준정적(quasi‑static) 근육 시뮬레이션을 실행했습니다.

2
00:00:06,840 --> 00:00:10,160
이번 영상에서는 근육과 지방을 결합해 돌리는 대신, 근육 위에 지방층을 얹는 방식으로 진행하겠습니다.

3
00:00:10,580 --> 00:00:12,380
먼저 지방용 스태틱 메쉬를 확인해 보죠.

4
00:00:14,300 --> 00:00:17,820
여기서 열어보면, 여기 버텍스 수, 즉 정점 개수가 상당히 많다는 걸 볼 수 있습니다.

5
00:00:18,360 --> 00:00:22,200
이는 이 스태틱 메쉬를 컬렉션으로 변환한 뒤 TetWild 또는 CreateTeproHeader 노드를 실행하면,

6
00:00:22,660 --> 00:00:26,500
실행 시간이 아주 아주 오래 걸린다는 뜻입니다. 그래서 여기서는 스태틱 메쉬를 다운샘플 하겠습니다.

7
00:00:27,600 --> 00:00:30,160
우클릭해서 이 스태틱 메쉬를 복제하세요.

8
00:00:31,760 --> 00:00:32,820
이 복제본 이름은 downsample로 하겠습니다.

9
00:00:33,800 --> 00:00:38,700
그런 다음 이걸 월드에 끌어다 놓고, 위치를 리셋해서 보기 좋은 위치로 맞춰줍니다.

10
00:00:38,960 --> 00:00:40,900
F 키를 눌러 이 스태틱 메쉬로 줌인하세요.

11
00:00:41,860 --> 00:00:44,220
여기 선택 모드를 모델링 모드로 바꿉시다.

12
00:00:45,040 --> 00:00:47,300
이제 Mesh 메뉴에서 Simplify로 들어갑니다.

13
00:00:48,700 --> 00:00:49,960
그러면 Simplification 도구가 열립니다.

14
00:00:50,920 --> 00:00:53,160
Simplifier Type은 QEM 대신 Existing Positions를 사용하겠습니다.

15
00:00:53,560 --> 00:00:56,220
스태틱 메쉬의 형상을 최대한 보존하려고 합니다.

16
00:00:57,040 --> 00:00:58,420
타깃 모드는 Vertex Count를 쓰겠습니다.

17
00:00:59,340 --> 00:01:01,600
목표 버텍스 수는 30,000으로 설정합시다.

18
00:01:03,040 --> 00:01:06,220
이 예제에서는 Simplification이 동작하려면 Discard Attributes 옵션을 체크해야 합니다.

19
00:01:06,500 --> 00:01:08,320
이제 보면 토폴로지가 달라졌습니다.

20
00:01:08,480 --> 00:01:11,020
그리고 이전보다 훨씬 안 좋아졌네요.

21
00:01:11,920 --> 00:01:13,040
Accept를 눌러 이 결과를 적용합니다.

22
00:01:13,420 --> 00:01:14,980
그리고 새 스태틱 메쉬를 꼭 저장하세요.

23
00:01:17,100 --> 00:01:20,040
이제 사면체 메쉬 폴더로 가서 지방층용 사면체 메쉬 작업을 하겠습니다.

24
00:01:20,320 --> 00:01:22,380
근육 때와 동일하게 새로운 Flesh 에셋을 만듭니다.

25
00:01:23,780 --> 00:01:25,280
이름은 fat tetrahedral mesh로 하겠습니다.

26
00:01:25,940 --> 00:01:26,500
Flesh 에셋입니다.

27
00:01:27,900 --> 00:01:28,880
새 데이터플로우 에셋을 만듭니다.

28
00:01:30,800 --> 00:01:32,600
첫 번째로 만들 노드는 Static Mesh입니다.

29
00:01:32,920 --> 00:01:34,640
방금 만든 스태틱 메쉬를 가져오죠.

30
00:01:36,380 --> 00:01:38,020
다운샘플된 스태틱 메쉬가 여기 있습니다.

31
00:01:38,580 --> 00:01:42,100
StaticMeshToCollection 노드를 사용해 스태틱 메쉬를 컬렉션으로 변환할 수 있습니다.

32
00:01:42,960 --> 00:01:45,800
여기에는 스태틱 메쉬의 컴포넌트를 분리(split)할지 선택하는 옵션이 있습니다.

33
00:01:45,900 --> 00:01:46,740
즉, 만약에 …

34
00:01:46,740 --> 00:01:50,480
예를 들어 근육이 하나의 스태틱 메쉬라면, 컴포넌트를 분리해서 근육을 여러 지오메트리로 나누고 싶을 겁니다.

35
00:01:50,660 --> 00:01:51,400
이번 경우엔 크게 상관없습니다.

36
00:01:51,460 --> 00:01:52,300
그래서 Off로 두겠습니다.

37
00:01:53,220 --> 00:01:54,060
여기 스태틱 메쉬를 연결하세요.

38
00:01:55,080 --> 00:01:57,500
그러면 지방층이 컬렉션으로 변환됩니다.

39
00:01:57,700 --> 00:02:00,920
구성 뷰포트에서 F를 눌러 지방층으로 줌인할 수 있습니다.

40
00:02:01,100 --> 00:02:01,860
스태틱 메쉬가 보이죠.

41
00:02:04,420 --> 00:02:06,960
다음으로 Create Tetrahedral 노드로 사면체 메쉬를 생성합시다.

42
00:02:07,900 --> 00:02:12,680
파라미터는 1편에서 자세히 설명했으니 곧 다시 요약하겠습니다.

43
00:02:13,440 --> 00:02:15,100
여기서는 제가 찾아둔 최적 파라미터를 쓰겠습니다.

44
00:02:15,280 --> 00:02:19,280
이 경우 메쉬가 매우 얇기 때문에 Fs for L 값을 더 낮게 쓰는 게 좋습니다.

45
00:02:19,460 --> 00:02:21,680
그리고 사면체 메쉬의 표면이 원래 표면을 가깝게 따라가도록 해야 합니다.

46
00:02:21,760 --> 00:02:23,380
그래야 사면체 메쉬에 구멍이 생기지 않습니다.

47
00:02:23,380 --> 00:02:24,440
특히 얇은 부분에서요.

48
00:02:25,520 --> 00:02:27,740
그래서 값을 0.0001로 낮추겠습니다.

49
00:02:27,860 --> 00:02:28,940
한 자릿수(오더) 더 낮춘 셈이죠.

50
00:02:29,540 --> 00:02:30,480
마찬가지로 Coarsen 박스를 체크합니다.

51
00:02:31,140 --> 00:02:35,480
이번에는 Transform Attribute가 더 이상 필요 없으므로 컬렉션 입력은 비워둡니다.

52
00:02:35,680 --> 00:02:37,020
변환(트랜스폼) 속성은 이미 근육 쪽에 저장되어 있습니다.

53
00:02:37,420 --> 00:02:41,560
결국 이 지방 사면체 메쉬를 근육에 append 해서 같은 트랜스폼 속성을 공유하게 만들 겁니다.

54
00:02:42,080 --> 00:02:43,900
그래서 여기서는 Source Collection에 컬렉션만 연결하면 됩니다.

55
00:02:44,440 --> 00:02:46,760
노드가 얼어붙어 보이지만, 평가가 시작된 것입니다.

56
00:02:48,500 --> 00:02:51,520
이 노드가 평가를 끝낼 때까지 약 15분 기다렸습니다.

57
00:02:52,120 --> 00:02:55,540
이제 지방층의 스태틱 메쉬로부터 생성된 사면체 메쉬를 확인해 보죠.

58
00:02:56,220 --> 00:02:57,940
Vertices 탭으로 가서 버텍스 수를 봅니다.

59
00:02:58,260 --> 00:02:59,100
52,000 버텍스입니다.

60
00:02:59,740 --> 00:03:01,540
마지막으로 Terminal 노드를 만듭니다.

61
00:03:02,540 --> 00:03:02,900
FleshAssetTerminal 입니다.

62
00:03:03,000 --> 00:03:06,140
이제 이 사면체 메쉬 컬렉션을 Flesh 에셋에 저장할 수 있습니다.

63
00:03:07,000 --> 00:03:08,980
전체 Flesh 에셋을 저장합시다.

64
00:03:09,760 --> 00:03:11,160
그리고 근육에서 했던 것과 같은 작업을 반복하겠습니다.

65
00:03:11,380 --> 00:03:13,280
셋업용으로 새로운 Flesh 에셋을 시작합니다.

66
00:03:13,440 --> 00:03:14,300
Flesh 에셋 폴더로 갑시다.

67
00:03:15,000 --> 00:03:15,840
새 Flesh 에셋을 만듭니다.

68
00:03:17,800 --> 00:03:22,140
이름은 Muscle Setup. 새 데이터플로우 에셋도 만듭니다.

69
00:03:23,720 --> 00:03:30,620
첫 노드는 당연히 Muscle Flesh Asset과 Fat Flesh Asset을 가져오는 것입니다.

70
00:03:31,540 --> 00:03:34,160
그래서 Muscle Setup이 들어 있는 Muscle Setup Flesh Asset을 가져오겠습니다.

71
00:03:34,980 --> 00:03:36,100
이 노드 이름은 Muscle Asset으로 하죠.

72
00:03:37,940 --> 00:03:42,000
방금 만든 지방층의 사면체 메쉬를 가져오는 노드도 하나 더 필요합니다.

73
00:03:42,540 --> 00:03:44,720
여기서는 Fat tetrahedral mesh Flesh Asset입니다.

74
00:03:45,680 --> 00:03:48,080
이제 지방층에는 아직 질량과 강성(stiffness) 속성을 설정하지 않았으니,

75
00:03:48,320 --> 00:03:49,080
아직 설정을 안 했기 때문이죠.

76
00:03:49,960 --> 00:03:51,600
그래서 SetFleshDefault Properties를 만듭니다.

77
00:03:52,680 --> 00:03:57,980
여기서 Density는 100, Vertex Stiffness는 10,000으로 설정합니다.

78
00:03:58,560 --> 00:04:03,120
이 값들은 근육에서 썼던 값보다 각각 한 자릿수(오더) 낮습니다.

79
00:04:03,220 --> 00:04:07,960
그 이유는 근육의 변형이 지방층보다 지배적이어서 근수축이 눈에 띄게 보이도록 하기 위함입니다.

80
00:04:08,340 --> 00:04:12,660
만약 두 값이 비슷하다면, 예를 들어 Vertex Stiffness가 근육과 같다면,

81
00:04:12,660 --> 00:04:16,020
지방층의 탄성 때문에 근육 변형이 사라져 보이게 됩니다.

82
00:04:17,060 --> 00:04:18,880
이제 Append 노드를 만듭시다.

83
00:04:19,200 --> 00:04:20,520
Append Tetrahedral Collection을 사용하겠습니다.

84
00:04:21,280 --> 00:04:23,120
이 노드는 Collection 1과 Collection 2, 두 컬렉션을 입력으로 받습니다.

85
00:04:23,400 --> 00:04:26,660
Collection 2의 속성이 앞쪽에, Collection 1의 속성이 뒤쪽에 붙습니다.

86
00:04:27,120 --> 00:04:30,460
근육을 여기, 지방층을 여기 연결합시다.

87
00:04:31,140 --> 00:04:33,020
이제 모두가 하나로 합쳐진 걸 볼 수 있습니다.

88
00:04:33,600 --> 00:04:34,540
버텍스 수도 확인되네요.

89
00:04:35,020 --> 00:04:37,700
컬렉션을 Append 할 때, 다른 그룹의 크기에 의존하는 속성 값들은

90
00:04:37,700 --> 00:04:41,360
자동으로 갱신됩니다. 예를 들어 버텍스 수나 지오메트리 수에 의존하는 속성들이요.

91
00:04:41,360 --> 00:04:45,280
예시로 Muscle Activation을 보면,

92
00:04:45,280 --> 00:04:49,000
Geometry Group Index가 28과 58입니다. 이 값은 지오메트리 그룹에 의존합니다. 그런데 Append 전,

93
00:04:49,220 --> 00:04:52,940
근육 에셋만 볼 때 Muscle Activation은 27과 57이었습니다. 그 이유는

94
00:04:52,940 --> 00:04:57,840
지방층이 하나 추가되면서 Geometry Group이 하나씩 밀렸기 때문입니다. 이제 이 노드를

95
00:04:57,840 --> 00:05:01,620
선택하고 F를 누르면, 결합된 컬렉션이 보이고

96
00:05:01,620 --> 00:05:05,540
근육과 지방층이 모두 포함된 걸 확인할 수 있습니다. 이제 약한 제약(weak constraints), 즉 Position Target 제약을 조금 만들겠습니다.

97
00:05:06,420 --> 00:05:09,500
Set Vertex/Triangle Position Target Binding 노드를 사용하면 됩니다.

98
00:05:11,460 --> 00:05:19,380
기본적으로 이 노드는 모든 쌍 사이에 스프링을 만듭니다. 근육–근육, 근육–지방, 지방–지방처럼요.

99
00:05:20,500 --> 00:05:26,100
특히 바깥 표면끼리도 스프링을 만드는데, 지방층이 얇아 가까워지는 경우가 있어 문제가 됩니다.

100
00:05:26,260 --> 00:05:31,120
그래서 지방층의 안쪽 면만 근육에 약한 제약으로 바인딩되도록 지정하겠습니다.

101
00:05:31,680 --> 00:05:34,900
페인팅을 통해 버텍스 선택을 만들어서 그렇게 설정할 수 있습니다.

102
00:05:35,740 --> 00:05:38,640
StaticMeshToCollection 노드를 하나 더 가져옵시다.

103
00:05:39,700 --> 00:05:41,200
Static Mesh는 FatLayer로 설정합니다.

104
00:05:42,340 --> 00:05:43,380
다운샘플된 것을 썼다는 걸 기억하세요.

105
00:05:44,080 --> 00:05:47,480
이제 이 스태틱 메쉬 위에 페인팅하고, 그 Attribute를 사면체 메쉬로 전송(Transfer)합니다.

106
00:05:48,140 --> 00:05:50,180
AddWeightMap을 만들어 줍니다.

107
00:05:51,320 --> 00:05:53,180
그러면 AddScalar…Property 노드가 생성됩니다.

108
00:05:53,580 --> 00:05:56,020
그런 다음 FatLayer를 선택하고 페인팅을 시작합니다.

109
00:05:56,260 --> 00:05:59,280
이때 Brush 툴을 쓰고 Strength는 1로,

110
00:06:00,140 --> 00:06:04,180
Visibility Filter는 Un-occluded로 설정합니다. 안쪽 면에는 칠하고 싶지 않기 때문입니다.

111
00:06:04,180 --> 00:06:10,680
전략은 바깥쪽 면을 먼저 칠한 다음, 선택을 반전해서 안쪽 층에만 칠한 결과를 얻는 것입니다.

112
00:06:11,140 --> 00:06:12,720
그럼 바깥 표면을 칠해봅시다.

113
00:06:16,650 --> 00:06:18,110
가끔 삼각형 일부가 빠져 보일 수 있습니다.

114
00:06:18,430 --> 00:06:21,710
그럴 땐 시점을 조금 바꿔 잡으면 선택할 수 있습니다.

115
00:06:25,710 --> 00:06:28,670
저는 바깥 표면을 몇 분 더 다듬었습니다.

116
00:06:28,890 --> 00:06:32,730
그런 뒤 Invert Current Surface 버튼을 눌러 페인팅을 반전합니다.

117
00:06:33,310 --> 00:06:36,190
이렇게 하면 표면의 페인팅 속성이 반전됩니다.

118
00:06:36,590 --> 00:06:44,450
주의할 점은 Invert Current 버튼이 모든 것을 반전시켜 내부 버텍스까지 바뀔 수 있다는 겁니다.

119
00:06:44,670 --> 00:06:46,010
이번에는 표면만 반전해야 합니다.

120
00:06:46,170 --> 00:06:49,850
그러니 이 버튼을 선택하고 Accept를 누른 다음, 이름을 꼭 지정하세요.

121
00:06:49,990 --> 00:06:51,550
이름은 Inner Fat으로 하겠습니다.

122
00:06:53,030 --> 00:06:54,830
이제 이걸 지방층으로 전송(Transfer)할 수 있습니다.

123
00:06:56,690 --> 00:07:00,310
드래그해서 Transfer Vertex Attribute 노드를 만듭니다.

124
00:07:01,650 --> 00:07:04,210
From Collection과 Attribute Key를 각각 연결하세요.

125
00:07:06,190 --> 00:07:07,330
여기 컬렉션 입력을 교체할 수 있습니다.

126
00:07:09,170 --> 00:07:12,830
이제 Combined Collection에도 방금 만든 Inner Fat 속성이 들어 있을 겁니다.

127
00:07:13,970 --> 00:07:16,390
이 Attribute에서 Vertex Selection을 뽑아오죠.

128
00:07:16,730 --> 00:07:19,490
사용할 노드는 Collection Select by Attribute입니다.

129
00:07:20,630 --> 00:07:21,690
컬렉션을 연결합니다.

130
00:07:22,030 --> 00:07:23,310
Attribute Key도 연결합니다.

131
00:07:23,810 --> 00:07:26,390
Group과 Attribute를 이미 연결했으므로, 이 옵션들은 무시해도 됩니다.

132
00:07:26,950 --> 00:07:29,690
Operation은 이 조건에 맞는 버텍스를 선택하는 방식입니다.

133
00:07:29,690 --> 00:07:34,010
값이 1인 것들을 뽑을 것이므로 Greater Than(>)으로 두고, 임계값을 0.5로 둡니다.

134
00:07:34,630 --> 00:07:38,630
즉 해당 Attribute가 0.5보다 큰 버텍스가 선택됩니다.

135
00:07:39,090 --> 00:07:41,770
이렇게 해서 Inner Fat에 대한 버텍스 선택이 반환됩니다.

136
00:07:42,110 --> 00:07:44,790
그 선택을 연결하고, 컬렉션도 연결합니다.

137
00:07:45,650 --> 00:07:49,790
그 전에 Target Stiffness 파라미터를 10으로 조정합시다.

138
00:07:50,350 --> 00:07:54,970
Vertex Radius Ratio는 0.004로 하고, 컬렉션을 연결합니다.

139
00:07:55,970 --> 00:07:59,350
이제 Inner Fat과 근육 사이에 약한 제약들을 만들겠습니다.

140
00:07:59,530 --> 00:08:02,850
Visualize Position Target 노드를 호출해서 결과를 시각화할 수 있습니다.

141
00:08:03,430 --> 00:08:11,110
렌더링되면 컬렉션 전반의 약한 제약들—근육–근육 제약까지—을 볼 수 있습니다.

142
00:08:13,710 --> 00:08:16,470
그중 작은 것들이 Inner Fat과 근육 사이의 제약입니다.

143
00:08:20,210 --> 00:08:22,450
충분한 양의 약한 제약이 생성됐는지 확인하는 방법입니다.

144
00:08:25,510 --> 00:08:34,410
근육과 지방 사이에 약한 제약을 만들었지만, 척추나 쇄골 주변에는 근육이 없습니다.

145
00:08:34,630 --> 00:08:39,310
그래서 시각화를 위해 뼈대를 불러오겠습니다.

146
00:08:42,830 --> 00:08:47,790
Skeletal Mesh를 Bones로 설정하고, 근육과 지방도 함께 선택해 표시합니다.

147
00:08:50,110 --> 00:08:58,410
근육 쪽으로 가서 뼈 표시도 함께 보이게 한 뒤, 노드를 복사해서 붙여넣을 수도 있습니다.

148
00:09:00,590 --> 00:09:07,230
Ctrl-C, Ctrl-V로 복붙하면 뼈가 보입니다.

149
00:09:07,230 --> 00:09:13,170
보시다시피 쇄골 주변과 척추를 따라 근육이 없습니다.

150
00:09:13,550 --> 00:09:28,760
따라서 지방층을 구동할 다른 것이 없으므로, 이 구간들에는 추가 제약이 필요합니다.

151
00:09:29,040 --> 00:09:30,500
그러니 Kinematic 제약을 몇 개 만들겠습니다.

152
00:09:33,420 --> 00:09:36,500
Set Flesh Bone Position Target Binding을 사용하고, 모드는 다시 Kinematic으로 둡니다.

153
00:09:37,440 --> 00:09:42,600
Radius Ratio는 0.002로 설정하고, Skeletal Mesh는 해당 뼈의 Skeletal Mesh를 지정합니다.

154
00:09:45,000 --> 00:09:45,740
그것들을 연결하세요.

155
00:09:47,820 --> 00:09:49,460
이제 Kinematic Faces도 시각화할 수 있습니다.

156
00:09:52,380 --> 00:09:55,740
쇄골 부위에 설정된 게 있는지 확인해 봅시다.

157
00:09:55,740 --> 00:10:01,580
쇄골을 따라, 그리고 흉곽(흉골) 주변에 Kinematic Faces가 있는 게 보일 겁니다.

158
00:10:01,660 --> 00:10:03,760
척추를 따라 있는 것도 보이는데, 좋은 징후입니다. 추가 제약을 제공합니다.

159
00:10:04,240 --> 00:10:06,940
팔꿈치 주변도 조금 있는데, 거긴 근육이 많지 않으니 아주 좋습니다.

160
00:10:08,680 --> 00:10:12,420
마지막으로 Flesh Asset Terminal 노드로 저장합시다.

161
00:10:13,280 --> 00:10:15,200
그리고 컬렉션을 Flesh 에셋에 저장합니다.

162
00:10:16,380 --> 00:10:18,880
Ctrl+S로 현재 셋업 진행 상황을 저장할 수 있습니다.

163
00:10:19,480 --> 00:10:22,260
요약하면, 근육과 지방층이 결합된 Flesh 에셋을 만들었습니다.

164
00:10:22,580 --> 00:10:24,540
그리고 지방층에는 Kinematic 제약과 Weak 제약을 일부 설정했습니다.

165
00:10:24,840 --> 00:10:27,300
다음 영상에서는 결합 에셋에 대해 준정적(quasi‑static) 시뮬레이션을 실행하겠습니다.
